<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Student Dashboard</title>
  <link rel="stylesheet" href="css/dashboard.css">
</head>
<body>
  <div class="container">
    <h2>ğŸ“˜ Student Dashboard</h2>

    <a href="index.html"><button class="btn home-btn">ğŸ  Go to Home Page</button></a>
    <button onclick="logout()" class="btn logout-btn">ğŸ“œ Logout</button>

    <form id="callForm" style="margin-top: 20px;">
      <input type="text" id="roomId" placeholder="Enter Room ID" required />
      <button type="submit" class="btn call-btn">ğŸ“ Start Video Call</button>
    </form>
  </div>

  <script>
    // ğŸ” Redirect to login if not authenticated
    if (!localStorage.getItem("authToken")) {
      window.location.href = "/login.html";
    }

    // ğŸ§  Make sure only students can access this page
    const role = localStorage.getItem("userRole");
    if (!role || role !== "student") {
      window.location.href = "/login.html";
    }

    // ğŸšª Logout function
    function logout() {
      localStorage.clear();
      alert("You have been logged out.");
      window.location.href = "/login.html";
    }

    // ğŸ“ Handle call form
    document.getElementById("callForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const roomId = document.getElementById("roomId").value.trim();
      if (roomId) {
        window.location.href = `/video-call.html?room=${roomId}`;
      } else {
        alert("Please enter a valid Room ID.");
      }
    });
  </script>
</body>
</html>
